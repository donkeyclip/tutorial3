/*
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */

import { isNumeric } from '../../helper';

export default class ElementAttribute {
  constructor(expressionProps) {
    this.expressionProps = {
      attribute: /\(([^)]+)\)/.exec(expressionProps.value)[1],
    };
  }

  calculateValues(elements) {
    const values = [];
    for (let i = 0; i < elements.length; i++) {
      const element = elements[i];
      let value = element.getAttribute(this.expressionProps.attribute);
      if (isNumeric(value)) {
        value = parseFloat(value);
      }
      values.push(value);
    }

    return values;
  }
}
